"0","#select datasetids of only vertebrate datasets from collections in geochrons.all"
"0","rm(i)"
"0","if (exists(""taxonids"")) {if (any(!geochrons$datasetid %in% taxonids$datasetid)) rm(taxonids)}"
"0","if (!exists(""taxonids"")) {"
"0","  vert.datasets <- unique(intersect(subset(vert_and_chron,"
"0","                                  vert_and_chron$collectionunitid %in% geochrons.all$collectionunitid)[, ""datasetid""],"
"0","                           datasets.info$`vertebrate fauna`$datasetid))"
"0","  temp <- vector(mode = ""list"",length = length(vert.datasets))"
"0","  print(""Downloading taxon IDs..."")"
"0","  if (exists(""i"")) {I <- i + 1; J <- round(i + 51,-2)} else {I <- 1; J <- 100}"
"0","  pb = txtProgressBar(min = I - 1, max = length(vert.datasets), initial = I)"
"0","  while (I <= length(vert.datasets)){"
"0","    for (i in I:J) {"
"0","      verts.temp <- try(get_from_tilia(vert.datasets[i],param = ""datasetid"",meth = ""getdatasetvariables"")$data) "
"0","      vals <- smalltaxa[na.omit(match(verts.temp$taxoncode,smalltaxa$taxoncode)), ""taxonid""]"
"0","      temp[[i]] <- data.frame(datasetid = rep(vert.datasets[i],length(vals)),"
"0","                              taxonid = vals)"
"0","      setTxtProgressBar(pb, i)"
"0","    }"
"0","    I <- i + 1; J <- i + 100"
"0","    if (J > length(vert.datasets)) {J <- length(vert.datasets)} "
"0","  }"
"0","  close(pb)"
"0","  taxonids <- distinct(rlist::list.stack(temp))"
"0","  write.csv(taxonids,""data/taxonids.csv"",row.names = F)"
"0","}"
"1","[1]"
"1"," ""Downloading taxon IDs..."""
"1","
"
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","="
"1","
"
"2","Warning: cannot open file 'data/taxonids.csv': No such file or directory"
"2","Error in file(file, ifelse(append, ""a"", ""w"")) : 
  cannot open the connection
"
